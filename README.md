# Project_DB
Проект представляет собой SQL - реляционную базу данных, реализованную на оперативной памяти.

База данных обрабатывает следующие комманды:
·CREATE TABLE <table_name> (<TYPE> <column_name>, ...)
·DELETE FROM <table_name> 
·INSERT INTO <table_name> VALUES (<value>,...)
·SELECT FROM * <table_name> 

База данных поддерживает следующие типы данных: 
Целочисленный знаковый тип - CUSTOM_INT
Дробный знаковый типа - CUSTOM_DOUBLE
Тип строки - CUSTOM_STRING

SQL-запрос обрабатывается с помощью следующих модулей:
·Splitter
·Parcer
·DB_request

Класс "Splitter" разделяет запрос на слова, разделенные табуляциями, пробелами и концами строки. Выходными данными работы основной функции класса является очередь std::string.
Пример работы: 
Исходная строка
"CREATE TABLE table_name(CUSTOM_INT name_column)" ->
Выходная очередь
"CREATE" "TABLE" "table_name" "(" "CUSTOM_INT" "name_column" ")"

Класс "Parcer" проводит токенизацию запроса на следующие токены:
·COMMAND
·Value
·String_value
·ARG_START
·ARG_FINISH
·COMA
Выходными данными работы основной функции класса является хэш-таблица, состоящая из ключа std::string и значения - соответствующего токена.
Пример работы:
Исходная строка
"CREATE TABLE table_name(CUSTOM_INT name_column)" ->
Выходная строка
"CREATE" - "Command"
"TABLE" - "Command"
"table_name" - "Value"
"(" - "ARG_START"
"CUSTOM_INT" - "Type"
"table_name" - "Value"
")" - "ARG_FINISH"
 
Модуль DB_request основан на паттерне машине состояний. В зависимости от запроса контекст переходит в то или иное состояние. Состояния выражены с помощью классов. В процессе разбора запроса заполняется структура класса, в случае ошибки в запросе возвращается текст ошибки std::string, в случае отсутствия ошибок возвращается пустая строка и выполняется запрос.
Пример работы модуля DB_request:
Исходная строка 
"CREATE TABLE table_name CUSTOM_INT name_column)" ->
Выходная строка
"No argument start token - <(>."

Хранение значений в базе данных реализовано за счет двух модулей: 
·Column
·DB_data

Column является классом для хранения колонки в таблице базы данных. Она состоит из названия колонки std::string и std::variant от динамического массива следующих типов:
·std::vector<int>
·std::vector<double>
·std::vector<std::string> 

DB_data содержит хэш-таблицу, где ключом является название таблицы std::string, а значением выступает динамический массив Column.
В классе DB_data реализован следущий функционал:
·Create_Table(const std::string& name) - создание таблицы с заданным именем
·Add_Column(const std::string& table_name, std::pair<int,std::string>& pair) - создание колонки с заданным именем и типом значений, хранимых в этой колонке
·Show_Table_Data(const std::string& table_name) - возвращает значения заданной таблицы с помощью двумерного динамического массива
·Delete_Column(std::string& table_name, std::string& column_name) - удаляет из заданной таблицы колонку с заданным именем
Ошибки обрабатываются с помощью исключений из стандарта std::exception
Тип задается с помощью структуры перечесления enum.

Работа с базой данных.
Для работы с базой данных необходимо подключить библиотеку DB_controller.lib и заголовочный файл DB_controller.hpp.
1. Необходимо создать экземпляр класса DB_controller
2. И для обработки запроса необходимо вызвать метод DB_controller.process(const std::string) и является noexcept.
3. В качестве ответа на запрос выводится строка std::string
4. Методы обращения к базе данных являются потокобезопасными - защищены мьютексами, поэтому данный код может работать в многопоточном приложении.

